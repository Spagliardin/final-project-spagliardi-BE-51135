"use strict";(self.webpackChunkfinal_project_spagliardi_FE_51135=self.webpackChunkfinal_project_spagliardi_FE_51135||[]).push([[555],{4555:(Q,g,i)=>{i.r(g),i.d(g,{CartRoutingModule:()=>I});var p=i(2590),t=i(8274),m=i(1135),u=i(4004),f=i(2340),x=i(529);const h=f.N.base_url,C=f.N.apis.carts;let v=(()=>{class r{constructor(e){this.http=e,this._totalPrice=new m.X(0),this.totalPrice$=this._totalPrice.asObservable()}getCartbyId(e){return this.http.get(`${h}/carts/${e}`).pipe((0,u.U)(({cart:n})=>{const a=this.getTotalPrice(n.products);return this._totalPrice.next(a),n.products}))}deleteProductToCart(e){return this.http.delete(`${h}/${C}`.replace("#cartId#","6442a40f7b7deb7e494c7a6a").replace("#productId#",e)).pipe((0,u.U)(({cartUpdateWithoutDelete:n})=>{const a=this.getTotalPrice(n.products);return this._totalPrice.next(a),n.products}))}updateQuantity(e,n){return this.http.put(`${h}/${C}`.replace("#cartId#","6442a40f7b7deb7e494c7a6a").replace("#productId#",n),{quantity:e}).pipe((0,u.U)(({cartUpdated:a})=>{const c=this.getTotalPrice(a.products);return this._totalPrice.next(c),a.products}))}getTotalPrice(e){return e.reduce((n,a)=>n+a.product.price*a.quantity,0)}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(x.eN))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var T=i(9751),A=i(727),b=i(8746),P=i(5226),Z=i.n(P);let y=(()=>{class r{constructor(){this._loading=new m.X(!1),this.loading$=this._loading.asObservable()}show(){this._loading.next(!0)}hide(){this._loading.next(!1)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var s=i(6895),l=i(433);function L(r,o){1&r&&(t.ynx(0),t.TgZ(1,"div",1)(2,"div",2)(3,"span",3),t._uU(4,"Loading..."),t.qZA()()(),t.BQk())}let w=(()=>{class r{constructor(e){this.loader=e,this.loading$=this.loader.loading$}ngOnInit(){}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(y))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-loading"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"w-100","d-flex","justify-content-center","mt-5","mb-5"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"]],template:function(e,n){1&e&&(t.YNc(0,L,5,0,"ng-container",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,n.loading$))},dependencies:[s.O5,s.Ov],styles:[".spinner-border[_ngcontent-%COMP%]{height:5rem;width:5rem}"]}),r})();function S(r,o){if(1&r){const e=t.EpF();t.TgZ(0,"tr")(1,"td",6)(2,"div",7)(3,"div",8),t._UZ(4,"img",9),t.qZA(),t.TgZ(5,"div",10)(6,"h4"),t._uU(7),t.qZA(),t.TgZ(8,"p",11),t._uU(9),t.qZA()()()(),t.TgZ(10,"td",12),t._uU(11),t.ALo(12,"currency"),t.qZA(),t.TgZ(13,"td",13)(14,"input",14),t.NdJ("ngModelChange",function(a){const d=t.CHM(e).$implicit;return t.KtG(d.quantity=a)}),t.qZA()(),t.TgZ(15,"td",15)(16,"div",16)(17,"button",17),t.NdJ("click",function(){const c=t.CHM(e).$implicit,d=t.oxw();return t.KtG(d.updateQuantity(c.quantity,c.product.pid))}),t._UZ(18,"i",18),t.qZA(),t.TgZ(19,"button",17),t.NdJ("click",function(){const c=t.CHM(e).$implicit,d=t.oxw();return t.KtG(d.deleteProduct(c.product.pid))}),t._UZ(20,"i",19),t.qZA()()()()}if(2&r){const e=o.$implicit;t.xp6(7),t.hij(" ",e.product.title," "),t.xp6(2),t.Oqu(e.product.category),t.xp6(2),t.hij(" ",t.lcZ(12,4,e.product.price)," "),t.xp6(3),t.Q6J("ngModel",e.quantity)}}let U=(()=>{class r{constructor(e,n){this.cartService=e,this.loader=n,this.productsInCart$=new T.y,this.updateQuantitySubscription=new A.w0}ngOnInit(){this.productsInCart$=this.cartService.getCartbyId("6442a40f7b7deb7e494c7a6a").pipe((0,b.x)(()=>this.loader.hide()))}deleteProduct(e){this.loader.show(),this.productsInCart$=this.cartService.deleteProductToCart(e).pipe((0,b.x)(()=>this.loader.hide()))}updateQuantity(e,n){this.updateQuantitySubscription=this.cartService.updateQuantity(e,n).subscribe({next:()=>{Z().fire({icon:"success",title:"success...",text:"Quantity updated"})},error:a=>{Z().fire({icon:"error",title:"Opss...",text:a})}})}ngOnDestroy(){this.updateQuantitySubscription.unsubscribe()}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(v),t.Y36(y))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-cart-list"]],decls:15,vars:3,consts:[["id","shoppingCart",1,"table","table-condensed","table-responsive"],[2,"width","60%"],[2,"width","12%"],[2,"width","10%"],[2,"width","16%"],[4,"ngFor","ngForOf"],["data-th","Product"],[1,"row"],[1,"col-md-3","text-left"],["src","https://via.placeholder.com/250x250/5fa9f8/ffffff","alt","",1,"img-fluid","d-none","d-md-block","rounded","mb-2","shadow"],[1,"col-md-9","text-left","mt-sm-2"],[1,"font-weight-light"],["data-th","Price"],["data-th","Quantity"],["type","number",1,"form-control","form-control-lg","text-center",3,"ngModel","ngModelChange"],["data-th","",1,"actions"],[1,"text-right"],[1,"btn","btn-white","border-secondary","bg-white","btn-md","mb-2",3,"click"],[1,"bi","bi-arrow-repeat"],[1,"bi","bi-trash"]],template:function(e,n){1&e&&(t._UZ(0,"app-loading"),t.ynx(1),t.TgZ(2,"table",0)(3,"thead")(4,"tr")(5,"th",1),t._uU(6,"Product"),t.qZA(),t.TgZ(7,"th",2),t._uU(8,"Price"),t.qZA(),t.TgZ(9,"th",3),t._uU(10,"Quantity"),t.qZA(),t._UZ(11,"th",4),t.qZA()(),t.TgZ(12,"tbody"),t.YNc(13,S,21,6,"tr",5),t.ALo(14,"async"),t.qZA()(),t.BQk()),2&e&&(t.xp6(13),t.Q6J("ngForOf",t.lcZ(14,1,n.productsInCart$)))},dependencies:[s.sg,l.Fj,l.wV,l.JJ,l.On,w,s.Ov,s.H9]}),r})();const $=function(){return["/products"]},_=[{path:"",children:[{path:"",component:(()=>{class r{constructor(e){this.cartService=e,this.totalPrice$=this.cartService.totalPrice$}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(v))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-cart"]],decls:25,vars:6,consts:[[1,"pt-5","pb-5"],[1,"container"],[1,"row","w-100"],[1,"col-lg-12","col-md-12","col-12"],[1,"display-5","mb-2","text-center"],[1,"mb-5","text-center"],[1,"text-info","font-weight-bold"],[1,"float-right","text-right"],[1,"row","mt-4","d-flex","align-items-center"],[1,"col-sm-6","order-md-2","text-right"],[1,"btn","btn-primary","mb-4","btn-lg","pl-5","pr-5",3,"disabled"],[1,"col-sm-6","mb-3","mb-m-1","order-md-1","text-md-left"],[3,"routerLink"],[1,"fas","fa-arrow-left","mr-2"]],template:function(e,n){1&e&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),t._uU(5,"Shopping Cart"),t.qZA(),t.TgZ(6,"p",5)(7,"i",6),t._uU(8,"3"),t.qZA(),t._uU(9," items in your cart"),t.qZA(),t._UZ(10,"app-cart-list"),t.TgZ(11,"div",7)(12,"h4"),t._uU(13,"Subtotal:"),t.qZA(),t.TgZ(14,"h1"),t._uU(15),t.ALo(16,"async"),t.qZA()()()(),t.TgZ(17,"div",8)(18,"div",9)(19,"button",10),t._uU(20,"Checkout"),t.qZA()(),t.TgZ(21,"div",11)(22,"a",12),t._UZ(23,"i",13),t._uU(24," Continue Shopping"),t.qZA()()()()()),2&e&&(t.xp6(15),t.hij("$",t.lcZ(16,3,n.totalPrice$),""),t.xp6(4),t.Q6J("disabled",!0),t.xp6(3),t.Q6J("routerLink",t.DdM(5,$)))},dependencies:[p.yS,U,s.Ov]}),r})()}]}];let I=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[p.Bz.forChild(_),p.Bz]}),r})()}}]);